<!DOCTYPE html><!--[if lt IE 7]><html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"></html><![endif]--><!--[if IE 7]><html lang="en" class="no-js lt-ie9 lt-ie8"></html><![endif]--><!--[if IE 8]><html lang="en" class="no-js lt-ie9"></html><![endif]--><!-- [if gt IE 8] <!--><html lang="en" class="no-js"><!-- <![endif]--><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>RMHS: Improving CPU performance modelling in QEMU</title><meta name="description" content="Major final year group design project (GDP), in which a flexible cache model was implemented in the QEMU MIPS CPU target. Imagination Technologies sponsored this project.
"><meta name="keywords" content="qemu, mips, cache, modelling, performance, l1, l2, emulator, profiling, valgrind, gnuplot, python"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Ricardo M. H. da Silva"><link rel="alternate" href="http://rmhsilva.com/feed.xml" type="application/rss+xml" title="Ricardo M. H. da Silva is an electronic engineer who also enjoys a bit of web design, rock climbing, and various other sporty or geeky activities"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css"><script src="/js/vendor/modernizr-custom-min.js"></script></head><body class="preload"><div id="topbar"><ul class="nav"><li><a href="/aboutme/">About</a></li><li><a href="/projects/" class="current">Projects</a></li><li><a href="/articles/">Articles</a></li></ul></div><div id="content"><section class="projects focus"><div class="article-list"><a href="/projects/multiview-video-compression/" class="article"><h2>Compression and Transmission of Multiview Video Data</h2><p class="date">01. May 2014</p><div class="intro"><p>Part of my final year requirements was a research project, for which I chose to investigate multi-view video compression and&nbsp;transmission.</p>
</div></a><a href="/projects/cache-performance-modelling-in-qemu/" class="article current"><h2>Improving CPU performance modelling in QEMU</h2><p class="date">12. December 2013</p><div class="intro"><p>Major final year group design project (<span class="caps">GDP</span>), in which a flexible cache model was implemented in the QEMU MIPS CPU target. Imagination Technologies sponsored this&nbsp;project.</p>
</div></a><a href="/projects/biltong/" class="article"><h2>Quick and simple Biltong Box</h2><p class="date">08. September 2013</p><div class="intro"><p>I built a Biltong Box from a new monitor box and a few bits. The humidity controller is probably over-engineered, but the complete build took no more than a few&nbsp;hours.</p>
</div></a><a href="/projects/speech-recognition-on-embedded-hw/" class="article"><h2>Hidden Markov Model based Speech Recognition on Embedded Hardware</h2><p class="date">28. June 2013</p><div class="intro"><p>My university third year project (dissertation) was an investigation into the capabilities of embedded hardware for performing modern speech recognition.  This article summarises my progress and&nbsp;findings.</p>
</div></a><a href="/projects/node-buspirate/" class="article"><h2>Node.js Bindings for the Bus Pirate</h2><p class="date">10. June 2013</p><div class="intro"><p>Because I wanted to script my Bus Pirate, the Ruby bindings weren‘t working and I’d prefer not to use&nbsp;Python.</p>
</div></a><a href="/projects/effect-pedals/" class="article"><h2>Guitar Effect Pedals (stompboxes)</h2><div class="intro"><p>Before I really got interested in electronics, I mainly coded a lot. Then I started building effect pedals for my electric&nbsp;guitar.</p>
</div></a><a href="/projects/homebuilt-guitar/" class="article"><h2>Homebuilt electric guitar</h2><div class="intro"><p>Actually it was mainly built in my old school‘s workshop, but my basement saw its fair share too.  I built this as part of a school project, and it’s definitely something I&#39;ll do again one&nbsp;day.</p>
</div></a></div><article class="main-article"><h1>Improving CPU performance modelling in QEMU</h1><section class="content"><p>Major final year group design project (<span class="caps">GDP</span>), in which a flexible cache model was implemented in the QEMU MIPS CPU target. Imagination Technologies sponsored this&nbsp;project.</p>
<hr>
<p>The final report is available in <span class="caps">PDF</span> format <a href="/projects/cache-performance-modelling-in-qemu/GDP_Report.pdf">here</a>, and the GitHub repository containing our work is at <a href="https://github.com/rmhsilva/qemu">github.com/rmhsilva/qemu</a>.</p>
<h2>Abstract</h2>
<p><span class="caps">QEMU</span> is a machine emulator and virtualiser, and is able to run operating systems or programs written for one CPU, such as MIPS, on a completely different CPU. However, QEMU does not actually model any hardware, and thus cannot be used to perform CPU cache profiling or analysis. This report presents the implementation of a flexible cache model in the QEMU MIPS target, which is capable of emulating L1 and L2 instruction and data caches, and can be configured with various cache sizes and types. It is designed to run as fast as possible, since anything added to QEMU inevitably slows down execution. To further improve performance, a slimmed down Linux Kernel was built. This report also describes a set of analysis tools that were created in order to facilitate analysis of the data provided by the cache model. The results of analysing several GNU applications with these tools are presented in the final sections of the&nbsp;report.</p>
<h3>Technologies&nbsp;used</h3>
<p>Several technologies were used to complete this&nbsp;project</p>
<ul>
<li><span class="caps">QEMU</span> is entirely written in&nbsp;C</li>
<li>Python scripts were created to prepare and analyse performance&nbsp;data</li>
<li>GNUPlot enabled instant data&nbsp;visualisation</li>
</ul>
</section></article></section></div><div id="footer"><div class="name"><a href="/">http://rmhsilva.com</a></div><div class="right"><div class="copy">&copy; Ricardo M. H. da Silva. All rights reserved.</div></div><div class="media"><a href="mailto:ric@rmhsilva.com"><i class="icon-envelope-alt"></i> ric@rmhsilva.com</a><span>&nbsp;</span><a href="http://www.linkedin.com/pub/ricardo-da-silva/72/ba0/a41" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a><span>&nbsp;</span><a href="/feed.xml"><i class="icon-rss"></i> RSS</a></div></div><script>window.onload = function() {
  document.getElementsByTagName('body')[0].removeAttribute('class');
}
</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
e=o.createElement(i);r=o.getElementsByTagName(i)[0];
e.src='//www.google-analytics.com/analytics.js';
r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
ga('create','UA-42722262-1','rmhsilva.com');
ga('send','pageview');</script></body></html>